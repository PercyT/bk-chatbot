(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],Array(71).concat([function(t,e,a){"use strict";a.r(e);var n=a(113);var i=a(79);for(var r in i)if(r!=="default")(function(t){a.d(e,t,function(){return i[t]})})(r);var o=a(3);var s=Object(o["a"])(i["default"],n["a"],n["b"],false,null,null,null);e["default"]=s.exports},,function(t,e,a){"use strict";a.r(e);var n=a(115);var i=a(84);for(var r in i)if(r!=="default")(function(t){a.d(e,t,function(){return i[t]})})(r);var o=a(105);var s=a(3);var l=Object(s["a"])(i["default"],n["a"],n["b"],false,null,null,null);e["default"]=l.exports},function(t,e,a){"use strict";a.r(e);var n=a(116);var i=a(88);for(var r in i)if(r!=="default")(function(t){a.d(e,t,function(){return i[t]})})(r);var o=a(108);var s=a(3);var l=Object(s["a"])(i["default"],n["a"],n["b"],false,null,null,null);e["default"]=l.exports},function(t,e,a){"use strict";a.r(e);var n=a(117);var i=a(94);for(var r in i)if(r!=="default")(function(t){a.d(e,t,function(){return i[t]})})(r);var o=a(109);var s=a(3);var l=Object(s["a"])(i["default"],n["a"],n["b"],false,null,null,null);e["default"]=l.exports},function(t,e,a){"use strict";a.r(e);var n=a(118);var i=a(97);for(var r in i)if(r!=="default")(function(t){a.d(e,t,function(){return i[t]})})(r);var o=a(111);var s=a(3);var l=Object(s["a"])(i["default"],n["a"],n["b"],false,null,null,null);e["default"]=l.exports},function(t,e,a){"use strict";a.r(e);var n=a(119);var i=a(100);for(var r in i)if(r!=="default")(function(t){a.d(e,t,function(){return i[t]})})(r);var o=a(112);var s=a(3);var l=Object(s["a"])(i["default"],n["a"],n["b"],false,null,null,null);e["default"]=l.exports},function(t,e,a){"use strict";var n=a(0);Object.defineProperty(e,"__esModule",{value:true});e.submitRequest=l;e.dialogOpen=u;e.dialogValidate=d;e.dialogConfirm=p;e.dialogClean=m;var i=n(a(15));var r=n(a(16));var o=n(a(1));var s=a(24);function l(t,e,a,n,i){return c.apply(this,arguments)}function c(){c=(0,r.default)(i.default.mark(function t(e,a,n,r,l){var c,u,d=arguments;return i.default.wrap(function t(i){while(1){switch(i.prev=i.next){case 0:c=d.length>5&&d[5]!==undefined?d[5]:"post";r[n].loading=true;i.prev=2;i.next=5;return o.default[c](e,a,{});case 5:u=i.sent;if(u.result){if(l&&typeof l==="function"){l(r)}(0,s.messageSuccess)(r[n].msg)}else{(0,s.messageError)(u.message)}i.next=12;break;case 9:i.prev=9;i.t0=i["catch"](2);if(i.t0.hasOwnProperty("message")&&i.t0.message==="OK"){if(l&&typeof l==="function"){l(r)}(0,s.messageSuccess)(r[n].msg)}case 12:i.prev=12;r[n].loading=false;r[n].visible=false;return i.finish(12);case 16:case"end":return i.stop()}}},t,null,[[2,9,12,16]])}));return c.apply(this,arguments)}function u(t,e,a){if(a&&typeof a==="function"){a(t)}t[e].visible=true}function d(t,e,a,n){return b.apply(this,arguments)}function b(){b=(0,r.default)(i.default.mark(function t(e,a,n,r){var o;return i.default.wrap(function t(a){while(1){switch(a.prev=a.next){case 0:if(r&&typeof r==="function"){r(e)}if(!(n!=="")){a.next=6;break}a.next=4;return e.$refs[n].validate().then(function(t){return true}).catch(function(t){return false});case 4:o=a.sent;return a.abrupt("return",o);case 6:return a.abrupt("return",true);case 7:case"end":return a.stop()}}},t)}));return b.apply(this,arguments)}function p(t,e,a){return f.apply(this,arguments)}function f(){f=(0,r.default)(i.default.mark(function t(e,a,n){var r,o,s=arguments;return i.default.wrap(function t(i){while(1){switch(i.prev=i.next){case 0:r=s.length>3&&s[3]!==undefined?s[3]:"post";if(!(n!=="")){i.next=7;break}i.next=4;return d(e,a,n,null);case 4:o=i.sent;if(o){i.next=7;break}return i.abrupt("return");case 7:if(e[a].dataCallback&&typeof e[a].dataCallback==="function"){e[a].dataCallback(e)}i.next=10;return l(e[a].mockUrl,e[a].params,a,e,e[a].submitCallback,r);case 10:case"end":return i.stop()}}},t)}));return f.apply(this,arguments)}function m(t,e){if(t[e].tearCallback&&typeof t[e].tearCallback==="function"){t[e].tearCallback(t)}t.$refs[e+"Ref"].clearError()}},function(t,e,a){"use strict";a.r(e);var n=a(80);var i=a.n(n);for(var r in n)if(r!=="default")(function(t){a.d(e,t,function(){return n[t]})})(r);e["default"]=i.a},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var n={props:{bizId:{type:String,default:""}},data:function t(){return{}},created:function t(){},mounted:function t(){},methods:{doHeader:function t(e,a){this.$emit("doHeader",e,a)}}};e.default=n},,,,function(t,e,a){"use strict";a.r(e);var n=a(85);var i=a.n(n);for(var r in n)if(r!=="default")(function(t){a.d(e,t,function(){return n[t]})})(r);e["default"]=i.a},function(t,e,a){"use strict";var n=a(0);Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var i=n(a(15));var r=n(a(29));var o=n(a(16));var s=a(103);var l=a(78);var c=a(86);var u={components:{},props:{bizId:{type:String}},data:function t(){return{botYW:null,botTableData:{pagination:{current:1,count:500,"limit-list":[10],limit:10},raw:[],data:[],multipleSelection:[],title:[],loading:false,searchData:{data:[{name:"ID",id:"1",prop:"bot_id",multiable:false,children:[]},{name:"名称",id:"2",prop:"bot_name",multiable:false,children:[]},{name:"类型",id:"3",prop:"bot_type",multiable:false,children:[]},{name:"创建人",id:"4",prop:"create_by",multiable:false,children:[]}],query:"",result:[]}},createBot:{visible:false,loading:false,msg:"机器人创建成功",title:"机器人创建",method:"post",form:{data:{botId:"",botName:"",botType:"default",xworkWebHook:"",xworkToken:"",xworkEncodingAESKey:""},rules:{botName:[{required:true,message:"请输机器人名称",trigger:"blur"}],botType:[{required:true,message:"请选择机器人类型",trigger:"change"}]}},mockUrl:"".concat("","/api/v1/")+this.bizId+"/bot/?".concat("","=intent&invoke=common"),params:{},openCallback:function t(e,a){e.createBot.mockUrl="".concat("","/api/v1/")+e.bizId+"/bot/?".concat("","=intent&invoke=common")},dataCallback:function t(e){e.createBot.params["biz_id"]=e.bizId;e.createBot.params["bot_id"]=e.createBot.form.data.botId||(0,s.randomStr)(false,16);e.createBot.params["bot_type"]=e.createBot.form.data.botType;e.createBot.params["bot_name"]=e.createBot.form.data.botName;e.createBot.params["biz_name"]="-"},submitCallback:function t(e){e.getTableData(1)},tearCallback:function t(e){e.createBot.form.data={botId:"",botName:"",botType:"default",xworkWebHook:"",xworkToken:"",xworkEncodingAESKey:""};e.createBot.params={}}},deleteBot:{visible:false,msg:"机器人删除成功",loading:false,method:"delete",mockUrl:"",params:{},openCallback:function t(e,a){e.deleteBot.mockUrl="".concat("","/api/v1/")+e.bizId+"/bot/"+a.id+"/?".concat("","=intent&invoke=common")},submitCallback:function t(e){e.getTableData(1)}}}},watch:{bizId:function t(e){this.init()}},mounted:function t(){this.$emit("doHeader",false);this.init()},methods:{handleTableSelectionChange:c.handleTableSelectionChange,dialogOpen:l.dialogOpen,dialogClean:l.dialogClean,dialogConfirm:l.dialogConfirm,init:function t(){this.botYW=this;if(this.bizId!==""&&typeof this.bizId!=="undefined"){this.getTableData(1)}},goIntent:function t(e){this.$router.push({path:"intent/list/".concat(e.row.id)})},handleTablePageChangeAsync:function t(e){this.getTableData(e,this.botTableData.searchData.query)},getTableData:function t(e,a){var n=this;return(0,o.default)(i.default.mark(function t(){var o,s;return i.default.wrap(function t(i){while(1){switch(i.prev=i.next){case 0:o={bizId:n.bizId,data:{biz_id:n.bizId,page:e}};if((0,r.default)(a)==="object"){a.forEach(function(t){o.data[t.prop]=t.values.map(function(t){return t.id}).join(",")})}i.prev=2;n.botTableData.loading=true;i.next=6;return n.$store.dispatch("bot/getBotTableData",o,{});case 6:s=i.sent;n.botTableData.raw=s.data.results||[];n.botTableData.data=JSON.parse(JSON.stringify(n.botTableData.raw));n.botTableData.pagination.count=s.data.count;n.botTableData.pagination.current=e;n.botTableData.loading=false;i.next=17;break;case 14:i.prev=14;i.t0=i["catch"](2);console.error(i.t0);case 17:case"end":return i.stop()}}},t,null,[[2,14]])}))()}}};e.default=u},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.handleTablePageChange=n;e.handleTablePageLimitChange=i;e.handleTableSelectionChange=r;e.handleTagSearchResult=o;e.handleFuzzySearchResult=s;function n(t,e,a){e[a].pagination.current=t;if(e[a].searchData.query.length>0||e[a].searchData.query!==""){e[a].data=e[a].searchData.result.slice((t-1)*e[a].pagination.limit,t*e[a].pagination.limit)}else{e[a].data=e[a].raw.slice((t-1)*e[a].pagination.limit,t*e[a].pagination.limit)}}function i(t,e,a){e[a].pagination.current=1;e[a].pagination.limit=t;if(e[a].searchData.query.length>0||e[a].searchData.query!==""){e[a].data=e[a].searchData.result.slice(0,t)}else{e[a].data=e[a].raw.slice(0,t)}}function r(t,e,a){e[a].multipleSelection=t}function o(t,e){t[e].searchData.result=[];for(var a=0;a<t[e].raw.length;a++){var n=t[e].raw[a];var i=true;for(var r=0;r<t[e].searchData.query.length;r++){var o=t[e].searchData.query[r];var s=o.values.map(function(t,e,a){return t.id});if(s.indexOf(n[o.prop])===-1){i=false;break}}if(i){t[e].searchData.result.push(n)}}t[e].pagination.count=t[e].searchData.result.length;t[e].data=t[e].searchData.result.slice(0,t[e].pagination.limit);t[e].pagination.current=1}function s(t,e){if(t[e].searchData.query===""){t[e].pagination.count=t[e].raw.length;t[e].data=t[e].raw.slice(0,t[e].pagination.limit);t[e].pagination.current=1;return}t[e].searchData.result=[];for(var a=0;a<t[e].raw.length;a++){var n=t[e].raw[a];for(var i in n){if((n[i]+"").search(t[e].searchData.query)!==-1){t[e].searchData.result.push(n)}}}t[e].pagination.count=t[e].searchData.result.length;t[e].data=t[e].searchData.result.slice(0,t[e].pagination.limit);t[e].pagination.current=1}},function(t,e,a){},function(t,e,a){"use strict";a.r(e);var n=a(89);var i=a.n(n);for(var r in n)if(r!=="default")(function(t){a.d(e,t,function(){return n[t]})})(r);e["default"]=i.a},function(t,e,a){"use strict";var n=a(0);Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var i=n(a(15));var r=n(a(29));var o=n(a(16));var s=n(a(106));var l=a(78);var c=a(86);var u={components:{intentCreateSlider:s.default},props:{bizId:{type:String}},data:function t(){return{intentYW:null,indexId:-1,intentTableData:{pagination:{current:1,count:500,"limit-list":[10],limit:10},intent:[],raw:[],data:[],title:[],loading:false,filters:{statusFilter:{tag:[{text:"开启",value:"开启"},{text:"开启",value:"开启"}],filterMethod:this.tagFilterMethod}},multipleSelection:[],searchData:{data:[{name:"名称",id:"1",prop:"intent_name",multiable:true,children:[]},{name:"创建人",id:"2",prop:"create_by",multiable:true,children:[]}],query:"",result:[]}},searchData:{data:[{name:"名称",id:"1",prop:"intent_name",multiable:true,children:[]},{name:"创建人",id:"2",prop:"create_by",multiable:true,children:[]}],query:"",result:[]},intentDelete:{visible:false,msg:"技能删除成功",loading:false,method:"delete",mockUrl:"",openCallback:function t(e,a){e.intentDelete.mockUrl="".concat("","/api/v1/")+e.bizId+"/intent/"+a.id+"/?".concat("","=intent&invoke=common")},submitCallback:function t(e){e.getTableData(1)}},intentUpdateStatus:{visible:false,msg:"操作成功",loading:false,method:"patch",mockUrl:"",params:{},openCallback:function t(e,a){e.intentUpdateStatus.params={status:a.status};e.intentUpdateStatus.mockUrl="".concat("","/api/v1/")+e.bizId+"/intent/"+a.id+"/?".concat("","=intent&invoke=common")}}}},watch:{bizId:function t(e){this.init()}},mounted:function t(){this.$emit("doHeader",false,"技能创建");this.init()},methods:{handleTableSelectionChange:c.handleTableSelectionChange,dialogOpen:l.dialogOpen,dialogClean:l.dialogClean,dialogConfirm:l.dialogConfirm,init:function t(){this.intentYW=this;if(this.bizId!==""&&typeof this.bizId!=="undefined"){this.getTableData(1)}},handleTablePageChangeAsync:function t(e){this.getTableData(e,this.intentTableData.searchData.query)},tagFilterMethod:function t(e,a,n){var i=n.property;return a[i]===e},getTableData:function t(e,a){var n=this;return(0,o.default)(i.default.mark(function t(){var o,s;return i.default.wrap(function t(i){while(1){switch(i.prev=i.next){case 0:o={bizId:n.bizId,data:{biz_id:n.bizId,page:e}};if((0,r.default)(a)==="object"){a.forEach(function(t){o.data[t.prop]=t.values.map(function(t){return t.id}).join(",")})}i.prev=2;n.intentTableData.loading=true;i.next=6;return n.$store.dispatch("intent/getIntentList",o,{});case 6:s=i.sent;n.intentTableData.raw=s.data.results||[];n.intentTableData.data=JSON.parse(JSON.stringify(n.intentTableData.raw));n.intentTableData.pagination.count=s.data.count;n.intentTableData.pagination.current=e;n.intentTableData.loading=false;i.next=17;break;case 14:i.prev=14;i.t0=i["catch"](2);console.error(i.t0);case 17:case"end":return i.stop()}}},t,null,[[2,14]])}))()},openIntentCreate:function t(e,a){this.$refs.intentCreateRef.dialogOpen(e,null,a)},popConfirm:function t(e,a){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";this[e].openCallback(this.intentYW,a);this.dialogConfirm(this.intentYW,"intentUpdateStatus","","patch")}}};e.default=u},function(t,e,a){"use strict";a.r(e);var n=a(91);var i=a.n(n);for(var r in n)if(r!=="default")(function(t){a.d(e,t,function(){return n[t]})})(r);e["default"]=i.a},function(t,e,a){"use strict";var n=a(0);Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var i=n(a(15));var r=n(a(16));var o=n(a(1));var s=a(78);var l=a(103);var c=a(24);var u={components:{},props:{botId:{type:String},bizId:{type:String}},data:function t(){return{intent:null,botData:{botId:-1,botName:"",isShowBot:"display: none",visible:true,disable:false,data:[]},groupSummary:[],intentCreate:{visible:false,msg:"技能创建成功",activeTaskMenu:"1",activeBasicMenu:"1",loading:false,method:"post",taskForm:{taskType:"job",taskName:"",taskId:"",taskGroup:[],taskActivities:[],taskParams:[]},taskRules:{taskType:[{required:true,message:"请选择任务类型",trigger:"change"}],taskId:[{required:true,message:"请选择任务名",trigger:"change"}]},intentForm:{intentName:"",utterance:[],authorityUsername:[],authorityGroup:[],doubleCommit:false},intentRules:{intentName:[{required:true,message:"请填写技能名称",trigger:"blur"}],utterance:[{message:"请输入语料",validator:this.validateListParam,trigger:"blur"}],authorityUsername:[{message:"请输入发起人",validator:this.validateListParam,trigger:"blur"}],authorityGroup:[{message:"请输入发起群",validator:this.validateListParam,trigger:"blur"}]}},taskTypeList:[{id:"job",name:"作业平台",enable:false},{id:"sops",name:"标准运维",enable:false},{id:"devops",name:"蓝盾",enable:true}],taskList:{source:[],data:[],map:{},detail:{},loading:false},sopsSchemes:{source:[],data:[],map:{},detail:{},loading:false},taskParamsTable:{pagination:{current:1,count:200,"limit-list":[5,10],limit:5},params:[],data:[],title:[],multipleSelection:[],loading:false,query:""},taskParamsConfig:{rowRef:null,visible:false,loading:false,msg:"参数配置成功",test:"",form:{data:{name:"",pattern:"",prompt:""},rules:{name:[{required:true,message:"请输入参数名称",trigger:"blur"}],pattern:[{required:true,message:"请输入匹配正则",trigger:"blur"}],prompt:[{required:true,message:"请输入提示语",trigger:"blur"}]}}}}},created:function t(){},methods:{goPage:l.goPage,goGroupBind:function t(){this.goPage(this,"/group/bind",true)},pasteUtteranceFn:function t(e){var a=e.split(";");this.intentCreate.intentForm.utterance=this.intentCreate.intentForm.utterance.concat(a)},pasteUsernameFn:function t(e){var a=e.split(";");this.intentCreate.intentForm.authorityUsername=this.intentCreate.intentForm.authorityUsername.concat(a)},handlePoolPageChange:function t(e){this.taskParamsTable.pagination.current=e;this.taskParamsTable.data=this.taskParamsTable.params.slice((e-1)*this.taskParamsTable.pagination.limit,e*this.taskParamsTable.pagination.limit)},handlePoolPageLimitChange:function t(e){this.taskParamsTable.pagination.current=1;this.taskParamsTable.data=this.taskParamsTable.params.slice(0,e)},handlePoolTableSelectionChange:function t(e){this.taskParamsTable.multipleSelection=e},validateListParam:function t(e){return(0,r.default)(i.default.mark(function t(){return i.default.wrap(function t(a){while(1){switch(a.prev=a.next){case 0:if(!(e.length===0)){a.next=2;break}return a.abrupt("return",false);case 2:return a.abrupt("return",true);case 3:case"end":return a.stop()}}},t)}))()},dialogOpen:function t(e,a,n){if(e==="taskParamsConfig"){this.taskParamsConfig.form.data.name=a.name;this.taskParamsConfig.form.data.pattern=a.pattern;this.taskParamsConfig.form.data.prompt=a.prompt;this.rowRef=a}else if(e==="intentCreate"){this.botData.botId=this.botId;this.getBotTableList();this.botData.isShowBot="display: block";this.botData.disable=true;if(n){this.intent=n;this.getIntentDetail(n)}else{this.intent=null}}this.getGroupSummary();this[e].visible=true},dialogValidate:function t(e,a){var n=this;if(e==="intentCreate"){Promise.all([this.$refs["taskFormRef"].validate(),this.$refs["intentFormRef"].validate()]).then(function(t){if(t.indexOf(false)===-1){n.dialogConfirm(e)}})}else if(a===""){this.dialogConfirm(e)}else{this.$refs[a].validate().then(function(t){n.dialogConfirm(e)},function(t){console.log("failed")})}},dialogConfirm:function t(e){var a={};var n="";var i=null;if(e==="intentCreate"){i=function t(a){a.$bkMessage({theme:"success",message:a[e].msg});a.$emit("getTableData",1)};a={biz_id:this.bizId,id:-1,index_id:this.botId,intent_name:this.intentCreate.intentForm.intentName,available_user:this.intentCreate.intentForm.authorityUsername,available_group:this.intentCreate.intentForm.authorityGroup,utterances:this.intentCreate.intentForm.utterance,status:true,is_commit:this.intentCreate.intentForm.doubleCommit,platform:this.intentCreate.taskForm.taskType,task_id:this.intentCreate.taskForm.taskId,activities:this.intentCreate.taskForm.taskActivities,slots:this.taskParamsTable.params,source:this.taskList.detail};n="".concat("","/api/v1/")+this.bizId+"/intent/?".concat("","=intent&invoke=common");if(this.intent){this.intentCreate.method="patch";a["id"]=this.intent.id;n="".concat("","/api/v1/")+this.bizId+"/intent/"+this.intent.id+"/?".concat("","=intent&invoke=common")}else{this.intentCreate.method="post";n="".concat("","/api/v1/")+this.bizId+"/intent/?".concat("","=intent&invoke=common")}}else if(e==="taskParamsConfig"){this.rowRef.name=this.taskParamsConfig.form.data.name;this.rowRef.pattern=this.taskParamsConfig.form.data.pattern;this.rowRef.prompt=this.taskParamsConfig.form.data.prompt;this[e].visible=false;return}(0,s.submitRequest)(n,a,e,this,i,this.intentCreate.method)},dialogCancel:function t(e){},dialogClean:function t(e){if(e==="intentCreate"){this.intentCreate.taskForm={taskType:"job",taskName:"",taskId:"",taskParams:[]};this.intentCreate.intentForm={intentName:"",utterance:[],authorityUsername:[],authorityGroup:[],doubleCommit:false};this.taskParamsTable.data=[];this.taskParamsTable.params=[];try{this.$refs["intentFormRef"].clearError();this.$refs["taskFormRef"].clearError()}catch(t){console.log("...")}}else if(e==="taskParamsConfig"){this.$refs["taskParamsConfigRef"].clearError()}},handleTaskTypeChange:function t(e,a){this.intentCreate.taskForm.taskId="";this.taskList.data=[];this.taskParamsTable.data=[];this.taskParamsTable.params=[]},getBotTableList:function t(){var e=this;return(0,r.default)(i.default.mark(function t(){var a;return i.default.wrap(function t(n){while(1){switch(n.prev=n.next){case 0:n.next=2;return e.$store.dispatch("bot/getBotTableData",{bizId:e.bizId,data:{biz_id:e.bizId}},{});case 2:a=n.sent;e.botData.data=a.data.results||[];e.botData.botId=e.botId;case 5:case"end":return n.stop()}}},t)}))()},getIntentDetail:function t(e){var a=this;return(0,r.default)(i.default.mark(function t(){var n,r,o;return i.default.wrap(function t(i){while(1){switch(i.prev=i.next){case 0:a.taskParamsTable.loading=true;a.intentCreate.intentForm.intentName=e.intent_name;a.intentCreate.intentForm.authorityGroup=e.available_group;a.intentCreate.intentForm.authorityUsername=e.available_user;a.intentCreate.intentForm.doubleCommit=e.is_commit;i.next=7;return a.$store.dispatch("intent/getUtteranceList",{bizId:a.bizId,data:{index_id:e.id}},{});case 7:n=i.sent;r=n.data||[];a.intentCreate.intentForm.utterance=r.length>0?r[0].content:[];i.next=12;return a.$store.dispatch("intent/getDBTaskList",{bizId:a.bizId,data:{index_id:e.id}},{});case 12:n=i.sent;o=n.data||[];o=o.length>0?o[0]:{};a.intentCreate.taskForm.taskType=o.platform;a.intentCreate.taskForm.taskId=parseInt(o.task_id);a.intentCreate.taskForm.taskActivities=o.activities;a.intentCreate.taskForm.taskGroup=o.activities.map(function(t){return t.id});a.taskList.detail=o.source;a.taskParamsTable.params=o["slots"];a.taskParamsTable.pagination.count=a.taskParamsTable.params.length;a.taskParamsTable.data=a.taskParamsTable.params.slice(0,a.taskParamsTable.pagination.limit);a.taskParamsTable.loading=false;a.getTaskList(true);case 25:case"end":return i.stop()}}},t)}))()},getGroupSummary:function t(){var e=this;return(0,r.default)(i.default.mark(function t(){var a;return i.default.wrap(function t(n){while(1){switch(n.prev=n.next){case 0:n.next=2;return e.$store.dispatch("group/getGroupSummary",{biz_id:e.bizId,id_deleted:false},{});case 2:a=n.sent;e.groupSummary=a.data.map(function(t){return{id:t.chat_index_id,name:t.chat_group_name}});case 4:case"end":return n.stop()}}},t)}))()},getTaskList:function t(e){var a=this;if(!e){this.taskList.data=[];return}var n={};var i="";if(this.intentCreate.taskForm.taskType==="job"){i="".concat("","/api/v1/task/")+this.bizId+"/describe_jobs/?".concat("","=intent&invoke=jobListV3")}else if(this.intentCreate.taskForm.taskType==="sops"){i="".concat("","/api/v1/task/")+this.bizId+"/describe_sopss/?".concat("","=intent&invoke=sopsList")}this.taskList.loading=true;o.default.post(i,n,{}).then(function(t){a.taskList.source=t.data||[];a.taskList.data=a.taskList.source;a.taskList.loading=false})},getTaskDetail:function t(e,a){var n=this;if(e===""||typeof e==="undefined"){return}var i={id:e};var r="";if(this.intentCreate.taskForm.taskType==="job"){r="".concat("","/api/v1/task/")+this.bizId+"/describe_job/?".concat("","=intent&invoke=jobDetailV3")}else if(this.intentCreate.taskForm.taskType==="sops"){r="".concat("","/api/v1/task/")+this.bizId+"/describe_sops/?".concat("","=intent&invoke=sopsDetail");if(this.intentCreate.taskForm.taskId!==""){this.getSopsSchemes()}}this.taskParamsTable.loading=true;o.default.post(r,i,{}).then(function(t){n.taskParamsTable.data=[];n.taskParamsTable.params=[];var e=t.data||{};if("global_var_list"in e){n.taskParamsTable.params=e["global_var_list"].map(function(t,e,a){return{priority:e+1,id:t["id"],name:t["name"],pattern:".*",prompt:"请输入"+t["name"],type:t["type"],value:t["value"]}})}else if("pipeline_tree"in e&&"constants"in e["pipeline_tree"]){var a=1;for(var i in e["pipeline_tree"]["constants"]){if(e["pipeline_tree"]["constants"][i]["show_type"]==="show"){n.taskParamsTable.params.push({id:i,priority:a,name:e["pipeline_tree"]["constants"][i]["name"],pattern:e["pipeline_tree"]["constants"][i]["validation"],prompt:"请输入"+e["pipeline_tree"]["constants"][i]["name"]});a++}}}n.taskList.detail=e;n.taskParamsTable.pagination.count=n.taskParamsTable.params.length;n.taskParamsTable.data=n.taskParamsTable.params.slice(0,n.taskParamsTable.pagination.limit);n.taskParamsTable.loading=false})},getSopsSchemes:function t(){var e=this;return(0,r.default)(i.default.mark(function t(){var a;return i.default.wrap(function t(n){while(1){switch(n.prev=n.next){case 0:e.sopsSchemes.loading=true;n.next=3;return e.$store.dispatch("intent/getSopsSchemes",{bizId:e.bizId,id:e.intentCreate.taskForm.taskId},{});case 3:a=n.sent;e.sopsSchemes.data=a.data||[];e.sopsSchemes.data.forEach(function(t){e.sopsSchemes.map[t.id]=t});e.sopsSchemes.loading=false;case 7:case"end":return n.stop()}}},t)}))()},handleSopsSchemesSelect:function t(e,a){var n=this;this.intentCreate.taskForm.taskActivities=e.map(function(t){return n.sopsSchemes.map[t]})},deleteParamItem:function t(e){this.taskParamsTable.params.splice(e,1);this.taskParamsTable.pagination.count=this.taskParamsTable.params.length;this.taskParamsTable.data=this.taskParamsTable.params.slice(0,this.taskParamsTable.pagination.limit)},testPattern:function t(){var e=new RegExp(this.taskParamsConfig.form.data.pattern);var a=e.exec(this.taskParamsConfig.test);if(a){(0,c.messageSuccess)(a[0])}else{(0,c.messageError)("正则匹配失败")}}}};e.default=u},function(t,e,a){},function(t,e,a){},function(t,e,a){"use strict";a.r(e);var n=a(95);var i=a.n(n);for(var r in n)if(r!=="default")(function(t){a.d(e,t,function(){return n[t]})})(r);e["default"]=i.a},function(t,e,a){"use strict";var n=a(0);Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var i=n(a(1));var r=n(a(5));var o=a(78);var s={components:{},data:function t(){return{isAuth:true,selectDB:"",selectCollection:"",isOpen:"is-expand",openAngle:"icon-angle-left",baseNameTable:{data:[],loading:false},knowledgeBaseTable:{pagination:{current:1,count:500,"limit-list":[5,10,50,100],limit:10},base:[],data:[],title:[],loading:false},searchData:{data:[{name:"创建人",id:"1",prop:"username",multiable:true,children:[]},{name:"问题",id:"2",prop:"question",multiable:true,children:[]},{name:"答案",id:"3",prop:"solution",multiable:true,children:[]}],query:"",result:[]},multipleSelection:[],deleteQA:{visible:false,msg:"QA删除成功",loading:false,title:"QA删除",data:[],tip:""},createQA:{visible:false,loading:false,msg:"QA创建成功",title:"QA创建",form:{data:{id:"",questions:[{value:""}],solution:""},rules:{solution:[{required:true,message:"请输问题答案",trigger:"blur"}],question:[{required:true,message:"请输问题",trigger:"blur"}]}}}}},mounted:function t(){this.$emit("doHeader",false);this.getBaseNameTableData()},methods:{switchTab:function t(){if(this.isOpen==="is-expand"){this.isOpen="is-collapse";this.openAngle="icon-angle-right"}else{this.isOpen="is-expand";this.openAngle="icon-angle-left"}},handlePageChange:function t(e){this.knowledgeBaseTable.pagination.current=e;this.knowledgeBaseTable.data=this.knowledgeBaseTable.base.slice((e-1)*this.knowledgeBaseTable.pagination.limit,e*this.knowledgeBaseTable.pagination.limit)},handlePageLimitChange:function t(e){this.knowledgeBaseTable.pagination.current=1;this.knowledgeBaseTable.data=this.knowledgeBaseTable.base.slice(0,e)},handleTableSelectionChange:function t(e){this.multipleSelection=e},handleBaseNameSelect:function t(e){this.baseNameTable.data=this.baseNameTable.data.map(function(t){t.class="task-list-tag-edit display";return t});e.class="task-list-tag-edit display active";this.selectDB=e.faq_db;this.selectCollection=e.faq_collection;this.getQATableData(e.faq_db,e.faq_collection)},getBaseNameTableData:function t(){var e=this;var a={member__contains:this.$store.state.user.username};var n="".concat("","/api/v1/faq/?").concat("","=intent&invoke=baseList&").concat(r.default.stringify(a));this.baseNameTable.loading=true;i.default.get(n,a,{}).then(function(t){e.baseNameTable.data=t.data.results||[];e.baseNameTable.data=e.baseNameTable.data.map(function(t){t.class="task-list-tag-edit display";return t});if(e.baseNameTable.data.length>0){e.baseNameTable.data[0].class="task-list-tag-edit display active";e.selectDB=e.baseNameTable.data[0].faq_db;e.selectCollection=e.baseNameTable.data[0].faq_collection;e.getQATableData(e.selectDB,e.selectCollection)}e.baseNameTable.loading=false}).catch(function(t){e.isAuth=false})},getQATableData:function t(e,a){var n=this;var r={faq_db:e,faq_collection:a};var o="".concat("","/api/v1/faq/describe_qas/?").concat("","=intent&invoke=qaList");this.knowledgeBaseTable.loading=true;i.default.post(o,r,{}).then(function(t){n.knowledgeBaseTable.base=t.data||[];n.knowledgeBaseTable.pagination.count=n.knowledgeBaseTable.base.length;var e=function t(e){var a=n.searchData.data[e].prop;n.searchData.data[e].children=n.knowledgeBaseTable.base.map(function(t,e,n){return{name:t[a],id:t[a]}})};for(var a in n.searchData.data){e(a)}n.knowledgeBaseTable.data=n.knowledgeBaseTable.base.slice(0,n.knowledgeBaseTable.pagination.limit);n.knowledgeBaseTable.pagination.current=1;n.knowledgeBaseTable.loading=false}).catch(function(t){n.isAuth=false})},searchResult:function t(){this.searchData.result=[];for(var e=0;e<this.knowledgeBaseTable.base.length;e++){var a=this.knowledgeBaseTable.base[e];var n=true;for(var i=0;i<this.searchData.query.length;i++){var r=this.searchData.query[i];var o=r["values"].map(function(t,e,a){return t["id"]});if(o.indexOf(a[r["prop"]])===-1){n=false;break}}if(n){this.searchData.result.push(a)}}this.knowledgeBaseTable.pagination.count=this.searchData.result.length;this.knowledgeBaseTable.data=this.searchData.result.slice(0,this.knowledgeBaseTable.pagination.limit);this.knowledgeBaseTable.pagination.current=1},dialogOpen:function t(e,a){if(e==="createQA"){if(typeof a!=="undefined"){this.createQA.title="QA修改";this.createQA.form.data.id=a._id;this.createQA.form.data.solution=a.solution;this.createQA.form.data.questions[0].value=a.question}else{this.createQA.title="QA创建"}}else if(e==="deleteQA"){this.deleteQA.data=this.multipleSelection.map(function(t){return t["_id"]});this.deleteQA.tip=this.deleteQA.data.join(", ")}this[e].visible=true},dialogValidate:function t(e,a){var n=this;if(a===""){this.dialogConfirm(e,a)}else{this.$refs[a].validate().then(function(t){n.dialogConfirm(e,a)},function(t){console.log("failed")})}},dialogConfirm:function t(e,a){var n=this.createQA.form.data;var i="";var r=function t(a){a.$bkMessage({theme:"success",message:a[e].msg});a.getQATableData(a.selectDB,a.selectCollection)};if(e==="createQA"){n["username"]=this.$store.state.user.username;n["faq_db"]=this.selectDB;n["faq_collection"]=this.selectCollection;if(n.id===""){i="".concat("","/api/v1/faq/create_qa/?").concat("","=intent&invoke=common")}else{i="".concat("","/api/v1/faq/update_qa/?").concat("","=intent&invoke=common")}}else if(e==="deleteQA"){n={ids:this.deleteQA.data,faq_db:this.selectDB,faq_collection:this.selectCollection};i="".concat("","/api/v1/faq/delete_qa/?").concat("","=intent&invoke=common")}(0,o.submitRequest)(i,n,e,this,r)},dialogClean:function t(e){if(e==="createQARef"){this.createQA.form.data={questions:[{value:""}],solution:"",username:this.$store.state.user.username,id:""};this.$refs[e].clearError()}else if(e==="deleteQARef"){this.deleteQA.data=[];this.deleteQA.tip=""}},addQuestion:function t(){this.createQA.form.data.questions.push({value:""})}}};e.default=s},function(t,e,a){},function(t,e,a){"use strict";a.r(e);var n=a(98);var i=a.n(n);for(var r in n)if(r!=="default")(function(t){a.d(e,t,function(){return n[t]})})(r);e["default"]=i.a},function(t,e,a){"use strict";var n=a(0);Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var i=n(a(15));var r=n(a(16));var o=a(110);var s={components:{},props:{bizId:{type:String}},data:function t(){return{taskRecordTable:{data:[],loading:false},taskExecutionLogTable:{data:[],loading:false},qaActiveName:"",botNum:0,intentNum:0}},watch:{bizId:function t(e){this.init()}},mounted:function t(){this.$emit("doHeader",false);this.init()},methods:{formatDate:o.formatDate,init:function t(){if(this.bizId!==""&&typeof this.bizId!=="undefined"){var e={username:this.$store.state.user.username,token:"inkG6qvWnmu935tnk19vN3f1jhPsybv5",data:{biz_id:Number(this.bizId)}};this.getRecordTableData(e);this.getLogTableData(e);this.getIntentNum()}},getLogTableData:function t(e){var a=this;return(0,r.default)(i.default.mark(function t(){var n;return i.default.wrap(function t(i){while(1){switch(i.prev=i.next){case 0:a.taskExecutionLogTable.loading=true;i.next=3;return a.$store.dispatch("chart/getLogTableData",e,{});case 3:n=i.sent;a.taskExecutionLogTable.data=n.data||[];a.taskExecutionLogTable.loading=false;case 6:case"end":return i.stop()}}},t)}))()},getRecordTableData:function t(e){var a=this;return(0,r.default)(i.default.mark(function t(){var n;return i.default.wrap(function t(i){while(1){switch(i.prev=i.next){case 0:a.taskRecordTable.loading=true;i.next=3;return a.$store.dispatch("chart/getRecordTableData",e,{});case 3:n=i.sent;a.taskRecordTable.data=n.data||[];a.taskRecordTable.loading=false;case 6:case"end":return i.stop()}}},t)}))()},getBotNum:function t(){var e=this;return(0,r.default)(i.default.mark(function t(){var a,n;return i.default.wrap(function t(i){while(1){switch(i.prev=i.next){case 0:i.next=2;return e.$store.dispatch("chart/getBotNum",{bizId:e.bizId},{});case 2:a=i.sent;n=a.data||{};e.botNum=n["count"];case 5:case"end":return i.stop()}}},t)}))()},getIntentNum:function t(){var e=this;return(0,r.default)(i.default.mark(function t(){var a,n;return i.default.wrap(function t(i){while(1){switch(i.prev=i.next){case 0:i.next=2;return e.$store.dispatch("chart/getIntentNum",{bizId:e.bizId},{});case 2:a=i.sent;n=a.data||{};e.intentNum=n["count"];case 5:case"end":return i.stop()}}},t)}))()}}};e.default=s},function(t,e,a){},function(t,e,a){"use strict";a.r(e);var n=a(101);var i=a.n(n);for(var r in n)if(r!=="default")(function(t){a.d(e,t,function(){return n[t]})})(r);e["default"]=i.a},function(t,e,a){"use strict";var n=a(0);Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var i=n(a(15));var r=n(a(29));var o=n(a(16));var s=a(86);var l=a(78);var c={components:{},props:{bizId:{type:String}},data:function t(){return{groupYW:null,groupTableData:{pagination:{current:1,count:500,"limit-list":[10],limit:10},raw:[],data:[],multipleSelection:[],title:[],filter:{date:[]},render:false,loading:false,searchData:{data:[{name:"更新人",id:"1",prop:"updated_by",multiable:false,children:[]},{name:"群ID",id:"2",prop:"chat_group_id",multiable:false,children:[]},{name:"群名称",id:"3",prop:"chat_group_name",multiable:false,children:[]}],query:"",result:[]}},bizData:{data:[]},bindBizToGroup:{visible:false,msg:"业务绑定成功",loading:false,title:"业务绑定",method:"post",data:[],form:{data:{id:-1,chat_bot_type:"xwork",biz_id:"",biz_name:"",chat_group_id:"",chat_group_name:""},rules:{chat_bot_type:[{required:true,message:"请选择群类型",trigger:"blur"}],biz_id:[{required:true,message:"请选择业务",trigger:"blur"}],chat_group_id:[{required:true,message:"请输入群ID",trigger:"blur"},{validator:this.checkGroupId,message:"该群已被其他业务绑定",trigger:"blur"}],chat_group_name:[{required:true,message:"请输入群群名称",trigger:"blur"}]}},mockUrl:"".concat("","/api/v1/chat_bind/?").concat("","=intent&invoke=common"),params:{},openCallback:function t(e,a){if(typeof a!=="undefined"){e.bindBizToGroup.form.data.chat_group_id=a.chat_group_id;e.bindBizToGroup.form.data.chat_group_name=a.chat_group_name;e.bindBizToGroup.mockUrl="".concat("","/api/v1/chat_bind/")+a.chat_group_id+"/?".concat("","=intent&invoke=common");e.bindBizToGroup.method="patch"}else{e.bindBizToGroup.form.data.chat_group_id="";e.bindBizToGroup.mockUrl="".concat("","/api/v1/chat_bind/?").concat("","=intent&invoke=common");e.bindBizToGroup.method="post"}e.bindBizToGroup.form.data.biz_id=e.bizId;e.getBiz()},dataCallback:function t(e){e.bindBizToGroup.params["biz_id"]=e.bindBizToGroup.form.data.biz_id;e.bindBizToGroup.params["chat_bot_type"]=e.bindBizToGroup.form.data.chat_bot_type;var a=e.bizData.data.find(function(t){return t["bk_biz_id"]===parseInt(e.bindBizToGroup.form.data.biz_id)});if(typeof a!=="undefined"){e.bindBizToGroup.params["biz_name"]=a["bk_biz_name"]}if(e.bindBizToGroup.form.data.chat_group_id!==""){e.bindBizToGroup.params["chat_group_id"]=e.bindBizToGroup.form.data.chat_group_id;e.bindBizToGroup.params["chat_group_name"]=e.bindBizToGroup.form.data.chat_group_name}},submitCallback:function t(e){e.getGroupTableData(1)},tearCallback:function t(e){e.bindBizToGroup.form.data={id:-1,chat_bot_type:"xwork",biz_id:"",biz_name:"",chat_group_id:"",chat_group_name:""};e.bindBizToGroup.params={}}},unBindBizToGroup:{visible:false,msg:"业务解绑成功",loading:false,mockUrl:"",openCallback:function t(e,a){e.unBindBizToGroup.mockUrl="".concat("","/api/v1/chat_bind/")+a.chat_group_id+"/?".concat("","=intent&invoke=common")},submitCallback:function t(e){e.getGroupTableData(1)}}}},watch:{bizId:function t(e){this.init()}},created:function t(){},mounted:function t(){this.$emit("doHeader",false);this.init()},methods:{dialogOpen:l.dialogOpen,dialogClean:l.dialogClean,dialogConfirm:l.dialogConfirm,handleTableSelectionChange:s.handleTableSelectionChange,init:function t(){this.groupYW=this;if(this.bizId!==""&&typeof this.bizId!=="undefined"){this.getGroupTableData(1)}},getGroupTableData:function t(e,a){var n=this;return(0,o.default)(i.default.mark(function t(){var o,s;return i.default.wrap(function t(i){while(1){switch(i.prev=i.next){case 0:o={page:e,biz_id:n.bizId};if((0,r.default)(a)==="object"){a.forEach(function(t){o[t.prop]=t.values.map(function(t){return t.id}).join(",")})}i.prev=2;n.groupTableData.loading=true;i.next=6;return n.$store.dispatch("group/getGroupTableData",o,{});case 6:s=i.sent;n.groupTableData.raw=s.data.results||[];n.groupTableData.data=JSON.parse(JSON.stringify(n.groupTableData.raw));n.groupTableData.pagination.count=s.data.count;n.groupTableData.pagination.current=e;n.groupTableData.loading=false;i.next=17;break;case 14:i.prev=14;i.t0=i["catch"](2);console.error(i.t0);case 17:case"end":return i.stop()}}},t,null,[[2,14]])}))()},checkGroupId:function t(e){var a=this;return(0,o.default)(i.default.mark(function t(){var n,r;return i.default.wrap(function t(i){while(1){switch(i.prev=i.next){case 0:i.next=2;return a.$store.dispatch("group/getGroupTableData",{chat_group_id:e},{});case 2:n=i.sent;r=n.data.results||[];return i.abrupt("return",!(r.length>0));case 5:case"end":return i.stop()}}},t)}))()},getBiz:function t(){var e=this;return(0,o.default)(i.default.mark(function t(){var a;return i.default.wrap(function t(n){while(1){switch(n.prev=n.next){case 0:n.next=2;return e.$store.dispatch("bot/getBiz",{},{});case 2:a=n.sent;e.bizData.data=a.data||[];case 4:case"end":return n.stop()}}},t)}))()},handleTablePageChangeAsync:function t(e){this.getGroupTableData(e,this.groupTableData.searchData.query)}}};e.default=c},function(t,e,a){},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.getPromiseResult=n;e.randomStr=i;e.goPage=r;function n(t,e){var a=new Promise(function(a,n){t.$refs[e].validate(function(t){if(t){a()}})});return a}function i(t,e,a){var n="";var i=e;var r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];if(t){i=Math.round(Math.random()*(a-e))+e}for(var o=0;o<i;o++){var s=Math.round(Math.random()*(r.length-1));n+=r[s]}return n}function r(t,e){var a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};if(a){var i=t.$router.resolve({path:e,query:n});window.open(i.href,"_blank")}else{t.$router.push({path:e})}}},,function(t,e,a){"use strict";var n=a(87);var i=a.n(n);var r=i.a},function(t,e,a){"use strict";a.r(e);var n=a(120);var i=a(90);for(var r in i)if(r!=="default")(function(t){a.d(e,t,function(){return i[t]})})(r);var o=a(107);var s=a(3);var l=Object(s["a"])(i["default"],n["a"],n["b"],false,null,null,null);e["default"]=l.exports},function(t,e,a){"use strict";var n=a(92);var i=a.n(n);var r=i.a},function(t,e,a){"use strict";var n=a(93);var i=a.n(n);var r=i.a},function(t,e,a){"use strict";var n=a(96);var i=a.n(n);var r=i.a},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.formatDate=n;e.renderShortcuts=r;e.generateTimeRange=o;function n(t,e){if(/(y+)/.test(e)){e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))}var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var n in a){if(new RegExp("(".concat(n,")")).test(e)){var r=a[n]+"";e=e.replace(RegExp.$1,RegExp.$1.length===1?r:i(r))}}return e}function i(t){return("00"+t).substr(t.length)}function r(){return[{text:"近24小时",value:function t(){var e=new Date;var a=new Date;a.setTime(a.getTime()-3600*1e3*24);return[a,e]},onClick:function t(e){console.error(e)}},{text:"近7天",value:function t(){var e=new Date;var a=new Date;a.setTime(a.getTime()-3600*1e3*24*7);return[a,e]}},{text:"近15天",value:function t(){var e=new Date;var a=new Date;a.setTime(a.getTime()-3600*1e3*24*15);return[a,e]}},{text:"近30天",value:function t(){var e=new Date;var a=new Date;a.setTime(a.getTime()-3600*1e3*24*30);return[a,e]}}]}function o(t,e,a){var n=Date.parse(t);var i=Date.parse(e);var r=i-n;var o=r/a;var s=[];for(var l=0;l<a;l++){var c=n+o*l;var u=n+o*(l+1);s.push([c,u])}return s}},function(t,e,a){"use strict";var n=a(99);var i=a.n(n);var r=i.a},function(t,e,a){"use strict";var n=a(102);var i=a.n(n);var r=i.a},function(t,e,a){"use strict";a.d(e,"a",function(){return n});a.d(e,"b",function(){return i});var n=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("router-view",{key:t.$route.path,attrs:{"biz-id":t.bizId},on:{doHeader:t.doHeader}})};var i=[]},,function(t,e,a){"use strict";a.d(e,"a",function(){return n});a.d(e,"b",function(){return i});var n=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("div",{staticClass:"main-content"},[a("div",{staticClass:"app-container"}),t._v(" "),a("div",{staticClass:"app-content"},[a("div",{staticClass:"wrapper"},[a("bk-container",{attrs:{col:12,gutter:4}},[a("bk-row",{staticClass:"mb15"},[a("bk-col",{attrs:{span:9}},[a("div",{staticClass:"content"},[a("bk-button",{attrs:{theme:"primary",title:"注册","ext-cls":"opsbot-button",disabled:""},on:{click:function(e){t.dialogOpen(t.botYW,"createBot",t.createBot.openCallback(t.botYW))}}},[t._v("\n                                注册")])],1)]),t._v(" "),a("bk-col",{attrs:{span:3}},[a("div",{staticClass:"content"},[a("bk-search-select",{attrs:{clearable:"","show-popover-tag-change":true,data:t.botTableData.searchData.data,"show-condition":false},on:{change:function(e){t.getTableData(1,t.botTableData.searchData.query)},clear:function(e){t.getTableData(1,t.botTableData.searchData.query)}},model:{value:t.botTableData.searchData.query,callback:function(e){t.$set(t.botTableData.searchData,"query",e)},expression:"botTableData.searchData.query"}})],1)])],1),t._v(" "),a("bk-row",[a("bk-col",{attrs:{span:12}},[a("bk-table",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.botTableData.loading,theme:"primary"},expression:"{ isLoading: botTableData.loading, theme: 'primary' }"}],attrs:{data:t.botTableData.data,size:"small",pagination:t.botTableData.pagination},on:{"page-change":t.handleTablePageChangeAsync,"selection-change":function(e){t.handleTableSelectionChange(e,t.botYW,"botTableData")}}},[a("bk-table-column",{attrs:{label:"名称",prop:"bot_name"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.bot_name))])]}}])}),t._v(" "),a("bk-table-column",{attrs:{label:"ID",prop:"bot_id"}}),t._v(" "),a("bk-table-column",{attrs:{label:"类型",prop:"bot_type"}}),t._v(" "),a("bk-table-column",{attrs:{label:"创建人",prop:"created_by"}}),t._v(" "),a("bk-table-column",{attrs:{label:"修改时间",prop:"updated_at"}}),t._v(" "),a("bk-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("bk-button",{ref:"bot-"+e.$index,staticClass:"mr10",attrs:{theme:"primary",text:"",disabled:""}},[t._v("编辑")]),t._v(" "),a("bk-popconfirm",{attrs:{trigger:"click","confirm-button-is-text":false,"confirm-text":"确定","cancel-text":"取消"},on:{confirm:function(e){t.dialogConfirm(t.botYW,"deleteBot","","delete")}}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("div",[a("i",{staticClass:"bk-icon icon-info-circle-shape pr5",staticStyle:{color:"red"}}),t._v("\n                                                确认删除该机器人: "+t._s(e.row.bot_name)+"\n                                            ")])]),t._v(" "),a("bk-button",{staticClass:"mr10",attrs:{theme:"primary",text:"",disabled:""},on:{click:function(a){t.dialogOpen(t.botYW,"deleteBot",t.deleteBot.openCallback(t.botYW,e.row))}}},[t._v("删除")])],1)]}}])})],1)],1)],1)],1)],1)]),t._v(" "),a("bk-dialog",{attrs:{theme:"primary",width:"500","header-position":"left",title:t.createBot.title,"auto-close":false,loading:t.createBot.loading},on:{confirm:function(e){t.dialogConfirm(t.botYW,"createBot","createBotRef",t.createBot.method)},"after-leave":function(e){t.dialogClean(t.botYW,"createBot")}},model:{value:t.createBot.visible,callback:function(e){t.$set(t.createBot,"visible",e)},expression:"createBot.visible"}},[a("bk-form",{ref:"createBotRef",attrs:{"label-width":200,"form-type":"vertical",model:t.createBot.form.data,rules:t.createBot.form.rules}},[a("bk-form-item",{attrs:{label:"类型",required:true,property:"botType"}},[a("bk-select",{attrs:{searchable:"",placeholder:"请选择机器人类型"},model:{value:t.createBot.form.data.botType,callback:function(e){t.$set(t.createBot.form.data,"botType",e)},expression:"createBot.form.data.botType"}},[a("bk-option",{attrs:{id:"default",name:"OPSBOT"}}),t._v(" "),a("bk-option",{attrs:{id:"qq",name:"QQ"}}),t._v(" "),a("bk-option",{attrs:{id:"xwork",name:"企业微信"}}),t._v(" "),a("bk-option",{attrs:{id:"wechat",name:"微信"}}),t._v(" "),a("bk-option",{attrs:{id:"slack",name:"Slack",disabled:""}})],1)],1),t._v(" "),a("bk-form-item",{attrs:{label:"名称",required:true,property:"botName"}},[a("bk-input",{attrs:{placeholder:"请输入新名称"},model:{value:t.createBot.form.data.botName,callback:function(e){t.$set(t.createBot.form.data,"botName",e)},expression:"createBot.form.data.botName"}})],1),t._v(" "),t.createBot.form.data.botType==="xwork"?a("bk-form-item",{attrs:{label:"WebHook",required:true,property:"xworkWebHook"}},[a("bk-input",{attrs:{placeholder:"请输入回调地址"},model:{value:t.createBot.form.data.xworkWebHook,callback:function(e){t.$set(t.createBot.form.data,"xworkWebHook",e)},expression:"createBot.form.data.xworkWebHook"}})],1):t._e(),t._v(" "),t.createBot.form.data.botType==="xwork"?a("bk-form-item",{attrs:{label:"Token",required:true,property:"xworkToken"}},[a("bk-input",{attrs:{placeholder:"请输入Token"},model:{value:t.createBot.form.data.xworkToken,callback:function(e){t.$set(t.createBot.form.data,"xworkToken",e)},expression:"createBot.form.data.xworkToken"}})],1):t._e(),t._v(" "),t.createBot.form.data.botType==="xwork"?a("bk-form-item",{attrs:{label:"EncodingAESKey",required:true,property:"xworkEncodingAESKey"}},[a("bk-input",{attrs:{placeholder:"请输入AesKey"},model:{value:t.createBot.form.data.xworkEncodingAESKey,callback:function(e){t.$set(t.createBot.form.data,"xworkEncodingAESKey",e)},expression:"createBot.form.data.xworkEncodingAESKey"}})],1):t._e()],1)],1)],1)};var i=[]},function(t,e,a){"use strict";a.d(e,"a",function(){return n});a.d(e,"b",function(){return i});var n=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("div",{staticClass:"main-content"},[a("div",{staticClass:"app-container"}),t._v(" "),a("div",{staticClass:"app-content"},[a("div",{staticClass:"wrapper"},[a("bk-container",{attrs:{col:12,gutter:4}},[a("bk-row",[a("bk-col",{attrs:{span:9}},[a("div",{staticClass:"content"},[a("bk-button",{attrs:{theme:"primary",title:"新建","ext-cls":"opsbot-button"},on:{click:function(e){t.openIntentCreate("intentCreate",null)}}},[t._v("新建技能")]),t._v(" "),a("bk-button",{staticClass:"mr10",attrs:{theme:"default",title:"刷新"},on:{click:function(e){t.getTableData(1,t.intentTableData.searchData.query)}}},[t._v("刷新")])],1)]),t._v(" "),a("bk-col",{attrs:{span:3}},[a("div",{staticClass:"content"},[a("bk-search-select",{attrs:{clearable:"","show-popover-tag-change":true,data:t.intentTableData.searchData.data,"show-condition":false},on:{change:function(e){t.getTableData(1,t.intentTableData.searchData.query)},clear:function(e){t.getTableData(1,t.intentTableData.searchData.query)}},model:{value:t.intentTableData.searchData.query,callback:function(e){t.$set(t.intentTableData.searchData,"query",e)},expression:"intentTableData.searchData.query"}})],1)])],1),t._v(" "),a("bk-row",{staticClass:"mt15"},[a("bk-col",{attrs:{span:12}},[a("bk-table",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.intentTableData.loading,theme:"primary"},expression:"{ isLoading: intentTableData.loading, theme: 'primary' }"}],attrs:{data:t.intentTableData.data,size:"small",pagination:t.intentTableData.pagination},on:{"page-change":t.handleTablePageChangeAsync,"selection-change":function(e){t.handleTableSelectionChange(e,t.intentYW,"intentTableData")}}},[a("bk-table-column",{attrs:{label:"技能名称",prop:"intent_name"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("bk-button",{staticClass:"mr10",attrs:{text:"",theme:"primary"},on:{click:function(a){t.openIntentCreate("intentCreate",e.row)}}},[t._v(t._s(e.row.intent_name))])]}}])}),t._v(" "),a("bk-table-column",{attrs:{label:"可执行人",prop:"available_user"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.available_user.join(",")))])]}}])}),t._v(" "),a("bk-table-column",{attrs:{label:"可执群",prop:"available_group"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.available_group.join(",")))])]}}])}),t._v(" "),a("bk-table-column",{attrs:{label:"修改时间",prop:"updated_at"}}),t._v(" "),a("bk-table-column",{attrs:{label:"状态",prop:"status",filters:t.intentTableData.filters.statusFilter.tag,"filter-method":t.intentTableData.filters.statusFilter.filterMethod},scopedSlots:t._u([{key:"default",fn:function(e){return[a("bk-switcher",{attrs:{theme:"primary",size:"small"},on:{change:function(a){t.popConfirm("intentUpdateStatus",e.row)}},model:{value:e.row.status,callback:function(a){t.$set(e.row,"status",a)},expression:"scope.row.status"}})]}}])}),t._v(" "),a("bk-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("bk-button",{ref:"intent-"+e.$index,staticClass:"mr10",attrs:{theme:"primary",text:""},on:{click:function(a){t.openIntentCreate("intentCreate",e.row)}}},[t._v("\n                                        编辑")]),t._v(" "),a("bk-popconfirm",{attrs:{trigger:"click","confirm-button-is-text":false,"confirm-text":"确定","cancel-text":"取消"},on:{confirm:function(e){t.dialogConfirm(t.intentYW,"intentDelete","","delete")}}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("div",[a("i",{staticClass:"bk-icon icon-info-circle-shape pr5",staticStyle:{color:"red"}}),t._v("\n                                                确认删除该项技能: "+t._s(e.row.intent_name)+"\n                                            ")])]),t._v(" "),a("bk-button",{staticClass:"mr10",attrs:{theme:"primary",text:""},on:{click:function(a){t.dialogOpen(t.intentYW,"intentDelete",t.intentDelete.openCallback(t.intentYW,e.row))}}},[t._v("删除")])],1)]}}])})],1)],1)],1)],1)],1)]),t._v(" "),a("intentCreateSlider",{ref:"intentCreateRef",attrs:{"bot-id":t.indexId,"biz-id":t.bizId},on:{getTableData:t.getTableData}})],1)};var i=[]},function(t,e,a){"use strict";a.d(e,"a",function(){return n});a.d(e,"b",function(){return i});var n=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("div",[t.isAuth===true?a("div",{staticClass:"main-content"},[a("div",{staticClass:"app-container"}),t._v(" "),a("div",{staticClass:"app-content"},[a("div",{staticClass:"wrapper"},[a("div",{staticClass:"task-layout"},[a("div",{class:["layout-left",t.isOpen]},[a("div",{staticClass:"scroll-faker-wrapper"},[a("div",{staticClass:"scroll-faker-content"},[a("div",{staticClass:"job-tag-wrapper"},t._l(t.baseNameTable.data,function(e){return a("div",{key:e.id,class:e.class,on:{click:function(a){t.handleBaseNameSelect(e)}}},[a("i",{staticClass:"tag-flag bk-icon icon-data"}),t._v(" "),a("div",{staticClass:"tag-name"},[a("div",{staticClass:"name-text",attrs:{tabindex:"0"}},[t._v(t._s(e.faq_name))])]),t._v(" "),a("div",{staticClass:"tag-num-box"},[a("span",{staticClass:"tag-num"},[t._v(t._s(e.num))])])])}),0)])])]),t._v(" "),a("div",{staticClass:"layout-right"},[a("div",{staticClass:"toggle-button"},[a("bk-button",{attrs:{theme:"default",text:""},on:{click:t.switchTab}},[a("i",{class:["bk-icon",t.openAngle]})])],1),t._v(" "),a("bk-container",{attrs:{col:12,gutter:4}},[a("bk-row",[a("bk-col",{attrs:{span:7}},[a("div",{staticClass:"content"},[a("bk-button",{staticClass:"mr10",attrs:{title:"primary",text:true,"hover-theme":"primary"},on:{click:function(e){t.dialogOpen("createQA")}}},[t._v("\n                                            新建\n                                        ")]),t._v(" "),a("bk-button",{staticClass:"mr10",attrs:{title:"warning","hover-theme":"primary",disabled:t.multipleSelection.length===0?true:false},on:{click:function(e){t.dialogOpen("deleteQA")}}},[t._v("\n                                            删除\n                                        ")])],1)]),t._v(" "),a("bk-col",{attrs:{span:5}},[a("div",{staticClass:"content"},[a("bk-search-select",{attrs:{clearable:"","show-popover-tag-change":true,data:t.searchData.data,"show-condition":false},on:{change:t.searchResult,clear:function(e){t.getQATableData(t.selectDB,t.selectCollection)}},model:{value:t.searchData.query,callback:function(e){t.$set(t.searchData,"query",e)},expression:"searchData.query"}})],1)])],1),t._v(" "),a("bk-row",[a("bk-col",{attrs:{span:12}},[a("bk-table",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.knowledgeBaseTable.loading,theme:"primary"},expression:"{ isLoading: knowledgeBaseTable.loading, theme: 'primary' }"}],staticStyle:{"margin-top":"15px"},attrs:{data:t.knowledgeBaseTable.data,size:"small","max-height":"666",pagination:t.knowledgeBaseTable.pagination},on:{"page-change":t.handlePageChange,"page-limit-change":t.handlePageLimitChange,"selection-change":t.handleTableSelectionChange}},[a("bk-table-column",{attrs:{type:"selection",width:"60"}}),t._v(" "),a("bk-table-column",{attrs:{label:"ID",prop:"_id"}}),t._v(" "),a("bk-table-column",{attrs:{label:"问题",prop:"question"}}),t._v(" "),a("bk-table-column",{attrs:{label:"答案",prop:"solution"}}),t._v(" "),a("bk-table-column",{attrs:{label:"创建人",prop:"username",width:"100"}}),t._v(" "),a("bk-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("bk-button",{staticClass:"mr10",attrs:{theme:"primary",text:""},on:{click:function(a){t.dialogOpen("createQA",e.row)}}},[t._v("编辑")])]}}])})],1)],1)],1)],1)],1)])])]),t._v(" "),a("bk-dialog",{attrs:{theme:"primary",width:"600","header-position":"left",title:t.createQA.title,"auto-close":false,loading:t.createQA.loading},on:{confirm:function(e){t.dialogValidate("createQA","createQARef")},"after-leave":function(e){t.dialogClean("createQARef")}},model:{value:t.createQA.visible,callback:function(e){t.$set(t.createQA,"visible",e)},expression:"createQA.visible"}},[a("bk-form",{ref:"createQARef",attrs:{"label-width":100,model:t.createQA.form.data,rules:t.createQA.form.rules}},[t._l(t.createQA.form.data.questions,function(e,n){return a("bk-form-item",{key:n,attrs:{label:"问题",required:true,rules:t.createQA.form.rules.question,"icon-offset":95,property:"questions."+n+".value"}},[a("bk-input",{attrs:{placeholder:"请输入问题"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"question.value"}},[a("template",{slot:"append"},[a("bk-button",{staticStyle:{border:"none",height:"30px","border-radius":"0"},attrs:{icon:"plus",theme:"primary"},on:{click:t.addQuestion}},[t._v("新增")])],1)],2)],1)}),t._v(" "),a("bk-form-item",{attrs:{label:"解决方案",required:true,property:"solution"}},[a("bk-input",{attrs:{placeholder:"请输入解决方案"},model:{value:t.createQA.form.data.solution,callback:function(e){t.$set(t.createQA.form.data,"solution",e)},expression:"createQA.form.data.solution"}})],1)],2)],1),t._v(" "),a("bk-dialog",{attrs:{theme:"primary",width:"500","header-position":"left",title:t.deleteQA.title,"auto-close":false,loading:t.deleteQA.loading},on:{confirm:function(e){t.dialogValidate("deleteQA","")},"after-leave":function(e){t.dialogClean("deleteQARef")}},model:{value:t.deleteQA.visible,callback:function(e){t.$set(t.deleteQA,"visible",e)},expression:"deleteQA.visible"}},[t._v("\n            确认删除："),a("p",[t._v(t._s(t.deleteQA.tip))])])],1):a("bk-exception",{staticClass:"exception-wrap-item",attrs:{type:"403"}},[a("span",[t._v("无查看权限")]),t._v(" "),a("div",{staticClass:"text-subtitle"},[t._v("你没有相应业务的访问权限，请前往申请相关业务权限")]),t._v(" "),a("div",{staticClass:"text-wrap"},[a("span",{staticClass:"text-btn"},[t._v("找小明")])])])],1)};var i=[]},function(t,e,a){"use strict";a.d(e,"a",function(){return n});a.d(e,"b",function(){return i});var n=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("div",{staticClass:"main-content"},[a("div",{staticClass:"app-container"}),t._v(" "),a("div",{staticClass:"app-content"},[a("div",{staticClass:"wrapper"},[a("bk-container",{staticClass:"neo-chart",attrs:{col:12,gutter:30}},[a("bk-row",[a("bk-col",{attrs:{span:3}},[a("bk-card",{staticClass:"opsbot-chart-card",attrs:{"show-head":false}},[a("br"),t._v(" "),a("span",{staticStyle:{"font-size":"28px"}},[t._v("机器人数")]),t._v(" "),a("br"),t._v(" "),a("span",{staticStyle:{"font-size":"24px"}},[a("bk-animate-number",{attrs:{value:"1"}})],1)])],1),t._v(" "),a("bk-col",{attrs:{span:3}},[a("bk-card",{staticClass:"opsbot-chart-card",attrs:{"show-head":false}},[a("br"),t._v(" "),a("span",{staticStyle:{"font-size":"28px"}},[t._v("技能数")]),t._v(" "),a("br"),t._v(" "),a("span",{staticStyle:{"font-size":"24px"}},[a("bk-animate-number",{attrs:{value:t.intentNum}})],1)])],1),t._v(" "),a("bk-col",{attrs:{span:6}},[a("bk-card",{staticClass:"opsbot-chart-base",attrs:{title:"知识库"}},[a("bk-collapse",{attrs:{accordion:""},model:{value:t.qaActiveName,callback:function(e){t.qaActiveName=e},expression:"qaActiveName"}},[a("bk-collapse-item",{attrs:{name:"1"}},[a("span",[a("i",{staticClass:"bk-icon icon-question-circle"}),t._v("  什么是BK-ChatBot")]),t._v(" "),a("div",{staticClass:"f13",attrs:{slot:"content"},slot:"content"},[t._v("\n                                        BK-ChatBot 是一款可通过可视化的界面进行任务配置，由聊天终端软件如企业微信应用机器人进行会话交互实现任务执行的蓝鲸 SaaS 产品。                                        ")])]),t._v(" "),a("bk-collapse-item",{attrs:{name:"2"}},[a("span",[a("i",{staticClass:"bk-icon icon-question-circle"}),t._v("  如何玩BK-ChatBot")]),t._v(" "),a("div",{staticClass:"f13",attrs:{slot:"content"},slot:"content"},[a("bk-link",{attrs:{theme:"primary",icon:"bk-icon icon-chain",href:"https://github.com/TencentBlueKing/bk-chatbot"}},[t._v("部署文档")])],1)])],1)],1)],1)],1),t._v(" "),a("bk-row",{staticStyle:{"margin-top":"20px"}},[a("bk-col",{attrs:{span:6}},[a("bk-card",{staticStyle:{height:"300px"},attrs:{title:"将以下任务创建为技能"}},[a("bk-table",{attrs:{"outer-border":false,"row-border":false,data:t.taskRecordTable.data,"show-header":false,size:"small","max-height":"200"}},[a("bk-table-column",{attrs:{label:"平台",prop:"platform",width:"60"}}),t._v(" "),a("bk-table-column",{attrs:{label:"名称",prop:"name"}}),t._v(" "),a("bk-table-column",{attrs:{label:"日期",prop:"end_time"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.formatDate(new Date(e.row.end_time),"yyyy-MM-dd hh:mm:ss")))])]}}])}),t._v(" "),a("bk-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("bk-button",{staticClass:"mr10",attrs:{theme:"primary",text:"",disabled:""},on:{click:function(a){t.remove(e.row)}}},[t._v("创建")])]}}])})],1)],1)],1),t._v(" "),a("bk-col",{attrs:{span:6}},[a("bk-card",{staticStyle:{height:"300px","overflow-x":"auto"},attrs:{title:"最近执行记录"}},[a("bk-table",{attrs:{data:t.taskExecutionLogTable.data,"outer-border":false,"header-border":false,"show-header":false,"max-height":"200"}},[a("bk-table-column",{attrs:{label:"平台",prop:"platform",width:"70"}}),t._v(" "),a("bk-table-column",{attrs:{label:"技能",prop:"intent_name"}}),t._v(" "),a("bk-table-column",{attrs:{label:"执行人",prop:"sender",width:"100"}}),t._v(" "),a("bk-table-column",{attrs:{label:"状态",prop:"status"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.status==="0"?a("span",{staticStyle:{color:"#c4c6cc"}},[t._v("初始状态")]):e.row.status==="1"?a("span",{staticStyle:{color:"#3a84ff"}},[t._v("执行中")]):e.row.status==="2"?a("span",{staticStyle:{color:"#2dcb56"}},[t._v("执行成功")]):e.row.status==="3"?a("span",{staticStyle:{color:"#ea3636"}},[t._v("执行失败")]):e.row.status==="4"?a("span",{staticStyle:{color:"#c4c6cc"}},[t._v("执行暂停")]):e.row.status==="5"?a("span",{staticStyle:{color:"#ea3636"}},[t._v("异常|终止")]):t._e()]}}])}),t._v(" "),a("bk-table-column",{attrs:{label:"开始时间",prop:"start_time"}})],1)],1)],1)],1)],1)],1)])])};var i=[]},function(t,e,a){"use strict";a.d(e,"a",function(){return n});a.d(e,"b",function(){return i});var n=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("div",{staticClass:"main-content"},[a("div",{staticClass:"app-container"}),t._v(" "),a("div",{staticClass:"app-content"},[a("div",{staticClass:"wrapper"},[a("bk-container",{attrs:{col:12,gutter:4}},[a("bk-row",{staticClass:"mb15"},[a("bk-col",{attrs:{span:9}},[a("div",{staticClass:"content"},[a("bk-button",{attrs:{theme:"default",title:"设置绑定","hover-theme":"primary"},on:{click:function(e){t.dialogOpen(t.groupYW,"bindBizToGroup",t.bindBizToGroup.openCallback(t.groupYW))}}},[t._v("\n                                设置绑定")])],1)]),t._v(" "),a("bk-col",{attrs:{span:3}},[a("div",{staticClass:"content"},[a("bk-search-select",{attrs:{clearable:"","show-popover-tag-change":true,data:t.groupTableData.searchData.data,"show-condition":false},on:{change:function(e){t.getGroupTableData(1,t.groupTableData.searchData.query)},clear:function(e){t.getGroupTableData(1,t.groupTableData.searchData.query)}},model:{value:t.groupTableData.searchData.query,callback:function(e){t.$set(t.groupTableData.searchData,"query",e)},expression:"groupTableData.searchData.query"}})],1)])],1),t._v(" "),a("bk-row",[a("bk-col",{attrs:{span:12}},[a("bk-table",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.groupTableData.loading,theme:"primary"},expression:"{ isLoading: groupTableData.loading, theme: 'primary' }"}],attrs:{data:t.groupTableData.data,pagination:t.groupTableData.pagination,"ext-cls":"opsbot-group-table"},on:{"page-change":t.handleTablePageChangeAsync,"selection-change":function(e){t.handleTableSelectionChange(e,t.groupYW,"groupTableData")}}},[a("bk-table-column",{attrs:{type:"selection",width:"60"}}),t._v(" "),a("bk-table-column",{attrs:{label:"群名称",prop:"chat_group_name"}}),t._v(" "),a("bk-table-column",{attrs:{label:"群类型",prop:"chat_bot_type"}}),t._v(" "),a("bk-table-column",{attrs:{label:"群ID",prop:"chat_group_id"}}),t._v(" "),a("bk-table-column",{attrs:{label:"更新人",prop:"updated_by"}}),t._v(" "),a("bk-table-column",{attrs:{label:"更新时间",prop:"updated_at"}}),t._v(" "),a("bk-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("bk-button",{ref:"group-"+e.$index,staticClass:"mr10",attrs:{theme:"primary",text:""},on:{click:function(a){t.dialogOpen(t.groupYW,"bindBizToGroup",t.bindBizToGroup.openCallback(t.groupYW,e.row))}}},[t._v("编辑")]),t._v(" "),a("bk-popconfirm",{attrs:{trigger:"click","confirm-button-is-text":false,"confirm-text":"确定","cancel-text":"取消"},on:{confirm:function(e){t.dialogConfirm(t.groupYW,"unBindBizToGroup","","delete")}}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("div",[a("i",{staticClass:"bk-icon icon-info-circle-shape pr5",staticStyle:{color:"red"}}),t._v("\n                                                确认解除群绑定: "+t._s(e.row.chat_group_id)+"\n                                            ")])]),t._v(" "),a("bk-button",{staticClass:"mr10",attrs:{theme:"primary",text:""},on:{click:function(a){t.dialogOpen(t.groupYW,"unBindBizToGroup",t.unBindBizToGroup.openCallback(t.groupYW,e.row))}}},[t._v("删除")])],1)]}}])})],1)],1)],1)],1)],1)]),t._v(" "),a("bk-dialog",{attrs:{theme:"primary",width:"500","header-position":"left",title:t.bindBizToGroup.title,"auto-close":false,loading:t.bindBizToGroup.loading},on:{confirm:function(e){t.dialogConfirm(t.groupYW,"bindBizToGroup","bindBizToGroupRef",t.bindBizToGroup.method)},"after-leave":function(e){t.dialogClean(t.groupYW,"bindBizToGroup")}},model:{value:t.bindBizToGroup.visible,callback:function(e){t.$set(t.bindBizToGroup,"visible",e)},expression:"bindBizToGroup.visible"}},[a("bk-form",{ref:"bindBizToGroupRef",attrs:{"label-width":200,"form-type":"vertical",model:t.bindBizToGroup.form.data,rules:t.bindBizToGroup.form.rules}},[a("bk-form-item",{attrs:{label:"类型",required:true,property:"chat_bot_type"}},[a("bk-select",{attrs:{searchable:"",placeholder:"请选择机器人类型",disabled:""},model:{value:t.bindBizToGroup.form.data.chat_bot_type,callback:function(e){t.$set(t.bindBizToGroup.form.data,"chat_bot_type",e)},expression:"bindBizToGroup.form.data.chat_bot_type"}},[a("bk-option",{attrs:{id:"default",name:"OPSBOT"}}),t._v(" "),a("bk-option",{attrs:{id:"qq",name:"QQ"}}),t._v(" "),a("bk-option",{attrs:{id:"xwork",name:"企业微信"}}),t._v(" "),a("bk-option",{attrs:{id:"wechat",name:"微信"}}),t._v(" "),a("bk-option",{attrs:{id:"slack",name:"Slack",disabled:""}})],1)],1),t._v(" "),a("bk-form-item",{attrs:{label:"业务",required:true,property:"biz_id"}},[a("bk-select",{attrs:{searchable:"",placeholder:"请选择机器业务",disabled:""},model:{value:t.bindBizToGroup.form.data.biz_id,callback:function(e){t.$set(t.bindBizToGroup.form.data,"biz_id",e)},expression:"bindBizToGroup.form.data.biz_id"}},t._l(t.bizData.data,function(t){return a("bk-option",{key:t.bk_biz_id,attrs:{id:t.bk_biz_id,name:t.bk_biz_name}})}),1)],1),t._v(" "),t.bindBizToGroup.method==="post"?a("bk-form-item",{attrs:{label:"群ID",required:true,property:"chat_group_id","desc-type":"icon",desc:"获取群ID方法：<br />\n                1.群中添加服务号：opsbot3.0机器人<br />\n                2.手动@opsbot3.0 并输入关键字'群ID'<br />\n                3.将获取到的群ID粘贴到输入框"}},[a("bk-input",{attrs:{placeholder:"请输入群ID"},model:{value:t.bindBizToGroup.form.data.chat_group_id,callback:function(e){t.$set(t.bindBizToGroup.form.data,"chat_group_id",e)},expression:"bindBizToGroup.form.data.chat_group_id"}})],1):t._e(),t._v(" "),a("bk-form-item",{attrs:{label:"群名称",required:true,property:"chat_group_name"}},[a("bk-input",{attrs:{placeholder:"请输入群名称"},model:{value:t.bindBizToGroup.form.data.chat_group_name,callback:function(e){t.$set(t.bindBizToGroup.form.data,"chat_group_name",e)},expression:"bindBizToGroup.form.data.chat_group_name"}})],1)],1)],1)],1)};var i=[]},function(t,e,a){"use strict";a.d(e,"a",function(){return n});a.d(e,"b",function(){return i});var n=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("div",[a("bk-sideslider",{attrs:{"is-show":t.intentCreate.visible,"quick-close":true,"ext-cls":"opsbot-intent-slider",width:"800"},on:{"update:isShow":function(e){t.$set(t.intentCreate,"visible",e)},hidden:function(e){t.dialogClean("intentCreate")}}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("bk-container",{attrs:{col:12}},[a("bk-row",[a("bk-col",{attrs:{span:9}},[a("span",[t._v("技能创建")])]),t._v(" "),a("bk-col",{class:[t.botData.isShowBot],attrs:{span:3}},[a("bk-select",{attrs:{searchable:"","ext-cls":"opsbot-create-select",disabled:t.botData.disable},model:{value:t.botData.botId,callback:function(e){t.$set(t.botData,"botId",e)},expression:"botData.botId"}},t._l(t.botData.data,function(t){return a("bk-option",{key:t.id,attrs:{id:t.id,name:t.bot_name}})}),1)],1)],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"wrapper"},[a("bk-container",{attrs:{col:12,gutter:4,"ext-cls":"opsbot-slider-container"}},[a("bk-row",[a("bk-col",{attrs:{span:12}},[a("bk-collapse",{staticClass:"opsbot-slider-collapse",model:{value:t.intentCreate.activeTaskMenu,callback:function(e){t.$set(t.intentCreate,"activeTaskMenu",e)},expression:"intentCreate.activeTaskMenu"}},[a("bk-collapse-item",{attrs:{name:"1"}},[t._v("\n                                    任务信息\n                                    "),a("div",{attrs:{slot:"content"},slot:"content"},[a("bk-form",{ref:"taskFormRef",attrs:{"label-width":100,model:t.intentCreate.taskForm,rules:t.intentCreate.taskRules}},[a("bk-form-item",{attrs:{label:"任务类型",required:true,property:"taskType"}},[a("bk-select",{attrs:{searchable:""},on:{select:t.handleTaskTypeChange},model:{value:t.intentCreate.taskForm.taskType,callback:function(e){t.$set(t.intentCreate.taskForm,"taskType",e)},expression:"intentCreate.taskForm.taskType"}},t._l(t.taskTypeList,function(t){return a("bk-option",{key:t.id,attrs:{disabled:t.enable,id:t.id,name:t.name}})}),1)],1),t._v(" "),a("bk-form-item",{attrs:{label:"任务名称",required:true,property:"taskId"}},[a("bk-row",[a("bk-col",{attrs:{span:10}},[a("bk-select",{attrs:{searchable:"",loading:t.taskList.loading},on:{toggle:t.getTaskList,selected:t.getTaskDetail},model:{value:t.intentCreate.taskForm.taskId,callback:function(e){t.$set(t.intentCreate.taskForm,"taskId",e)},expression:"intentCreate.taskForm.taskId"}},t._l(t.taskList.data,function(t){return a("bk-option",{key:t.id,attrs:{id:t.id,name:t.name}})}),1)],1),t._v(" "),a("bk-col",{attrs:{span:1}},[a("bk-button",{attrs:{title:"toggle-lock",icon:"icon-refresh",text:""},on:{click:function(e){t.getTaskDetail(t.intentCreate.taskForm.taskId,-1)}}})],1)],1)],1),t._v(" "),t.intentCreate.taskForm.taskType==="sops"&&t.intentCreate.taskForm.taskId!==""?a("bk-form-item",{attrs:{label:"任务分组",property:"taskGroup"}},[a("bk-select",{attrs:{searchable:"",multiple:"","display-tag":"",loading:t.sopsSchemes.loading},on:{toggle:t.getSopsSchemes,selected:t.handleSopsSchemesSelect},model:{value:t.intentCreate.taskForm.taskGroup,callback:function(e){t.$set(t.intentCreate.taskForm,"taskGroup",e)},expression:"intentCreate.taskForm.taskGroup"}},t._l(t.sopsSchemes.data,function(t){return a("bk-option",{key:t.id,attrs:{id:t.id,name:t.name}})}),1)],1):t._e(),t._v(" "),a("bk-form-item",{attrs:{label:"任务参数",property:"taskParams",desc:"你可以在这里定义技能执行所需要的参数。例如将“qa90 {versionNum} {GroupID}”填写到对应的步骤处"}},[a("bk-table",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.taskParamsTable.loading,theme:"primary"},expression:"{ isLoading: taskParamsTable.loading, theme: 'primary' }"}],ref:"taskParamsTableRef",attrs:{data:t.taskParamsTable.data,size:"small","max-height":"400","ext-cls":"opsbot-slider-table",pagination:t.taskParamsTable.pagination,"header-cell-style":{background:"#fff"}},on:{"page-change":t.handlePoolPageChange,"page-limit-change":t.handlePoolPageLimitChange,"selection-change":t.handlePoolTableSelectionChange}},[a("bk-table-column",{attrs:{label:"序号",prop:"priority",width:"60"}}),t._v(" "),a("bk-table-column",{attrs:{label:"参数名",prop:"name",sortable:""}}),t._v(" "),a("bk-table-column",{attrs:{label:"正则",prop:"pattern"}}),t._v(" "),a("bk-table-column",{attrs:{label:"提示语",prop:"prompt"}}),t._v(" "),a("bk-table-column",{attrs:{label:"操作",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("bk-popover",{staticClass:"dot-menu",attrs:{placement:"bottom-start",theme:"dot-menu light",trigger:"click",arrow:false,offset:"15",distance:0}},[a("span",{staticClass:"dot-menu-trigger"}),t._v(" "),a("ul",{staticClass:"dot-menu-list",attrs:{slot:"content"},slot:"content"},[a("li",{staticClass:"dot-menu-item",on:{click:function(a){t.dialogOpen("taskParamsConfig",e.row)}}},[t._v("修改")]),t._v(" "),a("li",{staticClass:"dot-menu-item",on:{click:function(a){t.deleteParamItem(e.$index)}}},[t._v("删除")])])])]}}])})],1)],1)],1)],1)])],1)],1)],1),t._v(" "),a("bk-row",[a("bk-col",{attrs:{span:12}},[a("bk-collapse",{staticClass:"opsbot-slider-collapse",model:{value:t.intentCreate.activeBasicMenu,callback:function(e){t.$set(t.intentCreate,"activeBasicMenu",e)},expression:"intentCreate.activeBasicMenu"}},[a("bk-collapse-item",{attrs:{name:"1"}},[t._v("\n                                    技能参数\n                                    "),a("div",{attrs:{slot:"content"},slot:"content"},[a("bk-form",{ref:"intentFormRef",attrs:{"label-width":100,model:t.intentCreate.intentForm,rules:t.intentCreate.intentRules}},[a("bk-form-item",{attrs:{label:"技能名称",required:true,property:"intentName"}},[a("bk-input",{attrs:{placeholder:"请输入技能名称",disabled:!(t.intent===null)},model:{value:t.intentCreate.intentForm.intentName,callback:function(e){t.$set(t.intentCreate.intentForm,"intentName",e)},expression:"intentCreate.intentForm.intentName"}})],1),t._v(" "),a("bk-form-item",{attrs:{label:"语料",required:true,property:"utterance",desc:"例如你有一个测试服部署的作业，那你可以添加这样一些语料：“测试服部署”、“QA服部署”等等，回车确认输入完成，多个黏贴;分隔"}},[a("bk-tag-input",{attrs:{placeholder:"请输入语料",list:t.list,"allow-create":true,"has-delete-icon":true,"paste-fn":t.pasteUtteranceFn},model:{value:t.intentCreate.intentForm.utterance,callback:function(e){t.$set(t.intentCreate.intentForm,"utterance",e)},expression:"intentCreate.intentForm.utterance"}})],1),t._v(" "),a("bk-form-item",{attrs:{label:"发起人",required:true,property:"authorityUsername",desc:"发起人必须在群里，回车确认输入完成"}},[a("bk-tag-input",{attrs:{placeholder:"请输入语料",list:t.list,"allow-create":true,"has-delete-icon":true,"paste-fn":t.pasteUsernameFn},model:{value:t.intentCreate.intentForm.authorityUsername,callback:function(e){t.$set(t.intentCreate.intentForm,"authorityUsername",e)},expression:"intentCreate.intentForm.authorityUsername"}})],1),t._v(" "),a("bk-form-item",{attrs:{label:"执行确认",property:"doubleCommit",desc:"任务执行需要经过确认后才会被执行"}},[a("bk-switcher",{attrs:{theme:"primary"},model:{value:t.intentCreate.intentForm.doubleCommit,callback:function(e){t.$set(t.intentCreate.intentForm,"doubleCommit",e)},expression:"intentCreate.intentForm.doubleCommit"}})],1)],1)],1)])],1)],1)],1)],1)],1)]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("bk-button",{staticStyle:{"margin-left":"30px"},attrs:{theme:"primary",loading:t.intentCreate.loading},on:{click:function(e){t.dialogValidate("intentCreate","intentCreateRef")}}},[t._v("确定\n            ")]),t._v(" "),a("bk-button",{attrs:{theme:"default"},on:{click:function(e){t.intentCreate.visible=false}}},[t._v("关闭")])],1)]),t._v(" "),a("bk-dialog",{attrs:{theme:"primary","header-position":"left",title:"参数配置","auto-close":false,loading:t.taskParamsConfig.loading},on:{confirm:function(e){t.dialogValidate("taskParamsConfig","taskParamsConfigRef")},cancel:function(e){t.dialogCancel("taskParamsConfig")},"after-leave":function(e){t.dialogClean("taskParamsConfig")}},model:{value:t.taskParamsConfig.visible,callback:function(e){t.$set(t.taskParamsConfig,"visible",e)},expression:"taskParamsConfig.visible"}},[a("bk-form",{ref:"taskParamsConfigRef",attrs:{"label-width":200,"form-type":"vertical",model:t.taskParamsConfig.form.data,rules:t.taskParamsConfig.form.rules}},[a("bk-form-item",{attrs:{label:"参数名称",required:true,property:"name"}},[a("bk-input",{attrs:{maxlength:"50",disabled:""},model:{value:t.taskParamsConfig.form.data.name,callback:function(e){t.$set(t.taskParamsConfig.form.data,"name",e)},expression:"taskParamsConfig.form.data.name"}})],1),t._v(" "),a("bk-form-item",{attrs:{label:"正则",required:true,property:"pattern"}},[a("bk-input",{model:{value:t.taskParamsConfig.form.data.pattern,callback:function(e){t.$set(t.taskParamsConfig.form.data,"pattern",e)},expression:"taskParamsConfig.form.data.pattern"}})],1),t._v(" "),a("bk-form-item",{attrs:{label:"提示语",required:true,property:"prompt"}},[a("bk-input",{model:{value:t.taskParamsConfig.form.data.prompt,callback:function(e){t.$set(t.taskParamsConfig.form.data,"prompt",e)},expression:"taskParamsConfig.form.data.prompt"}})],1),t._v(" "),a("bk-form-item",{attrs:{label:"正则测试"}},[a("bk-input",{attrs:{placeholder:"请输入验证参数"},model:{value:t.taskParamsConfig.test,callback:function(e){t.$set(t.taskParamsConfig,"test",e)},expression:"taskParamsConfig.test"}},[a("template",{slot:"append"},[a("bk-button",{staticStyle:{border:"none",height:"30px","border-radius":"0"},attrs:{theme:"primary"},on:{click:function(e){t.testPattern()}}},[t._v("测试")])],1)],2)],1)],1)],1)],1)};var i=[]}])]);